pipeline{
    agent any
    environment{
            RELEASE='20.4'
    }
    stages{

    stage('Build') {
        agent any
        environment{
            LOG_LEVEL='INFO'
        }
        steps {
            echo "Release ${RELEASE} i log level je ${LOG_LEVEL}"
        }
        parallel{
            stage('windows-amd-64'){
                steps{
                echo"Release ${RELEASE} i log level je ${LOG_LEVEL}"
                sh'sleep 10'
            }
            }
            stage('linux-arm-64'){
                steps{

                
                echo"Release ${RELEASE} i log level je ${LOG_LEVEL}"
                sh'sleep 20'
            }
            }
            stage('linux-amd-64'){
                steps{
                echo"Release ${RELEASE} i log level je ${LOG_LEVEL}"
                sh'sleep 30'
            }
            }
        }
    }
    stage('Test') {
        steps{
        echo "i Release je ${RELEASE}"
    }
}

    stage('Deploy'){
        input{
            message 'Da li zelis da deploy-ujes?'
            ok 'Da , siguran sam'
            parameters{
                string(name: 'TARGET_ENVIORMENT',defaultValue:'PROD', description:'Target deployment okruzenje')
            }
        }
        steps{
            echo "Deploy-ujem Release ${RELEASE} u produkcijsko okruzenje : ${TARGET_ENVIORMENT}"

        }
    }
    }
    post{
        always{
            echo"Ispisuje se ova poruke nebitno da li je uspeo pipeline ili ne!"
        }
    }

}